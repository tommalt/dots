#                                  ██ ██████
#                                  ██      ██
#                                  ██  █████
#                                  ██      ██
#                                  ██ ██████

set $mod Mod4

set $term urxvt
set $browser /usr/bin/firefox-developer-edition
set $INTERACTIVE_SHELL /bin/bash
bindsym $mod+Return exec --no-startup-id $term -e $INTERACTIVE_SHELL
bindsym $mod+Shift+Return exec --no-startup-id /home/tom/bin/termd.sh $term "`xcwd`"
bindsym $mod+apostrophe split h ;; exec --no-startup-id /home/tom/bin/termd.sh $term "`xcwd`"
bindsym $mod+slash split v ;; exec --no-startup-id /home/tom/bin/termd.sh $term "`xcwd`"

# Kill focused window
bindsym $mod+q kill


# Change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split
bindsym $mod+m split h
bindsym $mod+n split v

# Enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# Layouts
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# Toggle tiling / floating
bindsym $mod+Shift+space floating toggle
bindsym $mod+space focus mode_toggle
floating_modifier $mod

# Focus the parent container
bindsym $mod+p focus parent
bindsym $mod+z focus child

#goto previous workspace
bindsym $mod+backslash workspace back_and_forth
bindsym $mod+Shift+backslash move container to workspace back_and_forth

# Switch to workspace
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10
# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

# reload, restart, exit, lock
bindsym $mod+Shift+c reload
bindsym $mod+Shift+F1 restart
bindsym $mod+Shift+Escape exit
bindsym $mod+Shift+x exec --no-startup-id i3lock -c 000000

mode "resize" {
	bindsym h resize shrink width 5 px or 5 ppt
        bindsym k resize grow height 5 px or 5 ppt
        bindsym j resize shrink height 5 px or 5 ppt
        bindsym l resize grow width 5 px or 5 ppt
	bindsym Left resize shrink width 5 px or 5 ppt
        bindsym Down resize grow height 5 px or 5 ppt
        bindsym Up resize shrink height 5 px or 5 ppt
        bindsym Right resize grow width 5 px or 5 ppt
        bindsym Return mode "default"
        bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

#generic sound control (volume)
set $inc --no-startup-id pactl set-sink-volume 0 +5%
set $dec --no-startup-id pactl set-sink-volume 0 -5%
set $mute --no-startup-id pactl set-sink-mute 0 toggle

#cmus control
set $music --no-startup-id urxvt -e cmus
set $pause --no-startup-id cmus-remote -u
set $prev --no-startup-id cmus-remote -r
set $next --no-startup-id cmus-remote -n
set $begin --no-startup-id cmus-remote -k 00:00:00

bindsym XF86AudioRaiseVolume exec $inc
bindsym XF86AudioLowerVolume exec $dec
bindsym XF86AudioMute exec $mute

bindsym $mod+Shift+m exec $music
bindsym XF86AudioPlay exec $pause
bindsym XF86AudioPause exec $pause
bindsym XF86AudioPrev exec $prev
bindsym XF86AudioNext exec $next
bindsym $mod+period exec $begin

exec --no-startup-id /home/tom/bin/menu-key.sh
exec --no-startup-id xset r rate 175 30
exec --no-startup-id setxkbmap -option ctrl:swapcaps
exec_always --no-startup-id /home/tom/bin/i3-set-background

# dmenu, and application shortcuts
bindsym $mod+d exec --no-startup-id dmenu_run -nb Black -sb "$CL_6" -l 10
bindsym $mod+Shift+f exec --no-startup-id $browser
bindsym XF86Calculator exec --no-startup-id $term -e python
bindsym XF86HomePage exec --no-startup-id $browser https://www.archlinux.org/

# Style #
font pango:Inconsolata 12px


# Colors alias - old, from solarized dark theme
#set $CL_BG #002b36
#set $CL_FG #ABB2BF
set $CL_CUR #ff6347
set $CL_BLACK #000000
set $CL_RED #dc322f
set $CL_GREEN #98C379
set $CL_ORANGE #ff6347
set $CL_BLUE #61AEEE
set $CL_MAGENTA #d33682
set $CL_CYAN #2aa198
set $CL_LIGHTGRAY #ABB2BF
set $CL_DARKGRAY #5C6370
set $CL_WHITE #FFFFFF
# class                 border      backgr.     text    indicator   child_border
#client.focused          $CL_CUR     $CL_CUR     $CL_BG   $CL_CUR     $CL_CUR
#client.focused_inactive $CL_MAGENTA $CL_MAGENTA $CL_BG   $CL_MAGENTA $CL_MAGENTA
#client.unfocused        $CL_BG      $CL_BG      $CL_CUR  $CL_BG      $CL_BG
#client.urgent           $CL_RED     $CL_RED     $CL_BG   $CL_RED     $CL_RED
#client.placeholder      $CL_BG      $CL_BG      $CL_WHITE $CL_BLACK  $CL_BG

#colors from Xresources, set by wal
# defaults are as follows:
#  color0 = black
#	1 = dark pink-ish
#	2 = tan/kakhi with *hint* of orange/brown
#	3 = indigo
#	4 = lighter indigo
#	5 = blue
#	6 = magenta
#	7 = light magenta
#	8 = gray / magenta
#	9 = opaque/soft  gray/red-ish
#	10= gray / orangeish
#	11= purple/blue/indigo
#	12= soft indigo
#	13= blue
#	14= magenta (soft)
#	15= magenta (light)
set_from_resource $CL_0 i3wm.color0 #150C1E
set_from_resource $CL_1 i3wm.color1 #A14E61
set_from_resource $CL_2 i3wm.color2 #A88D7C
set_from_resource $CL_3 i3wm.color3 #513591
set_from_resource $CL_4 i3wm.color4 #615399
set_from_resource $CL_5 i3wm.color5 #484BC2
set_from_resource $CL_6 i3wm.color6 #985E9E
set_from_resource $CL_7 i3wm.color7 #D59FD5
set_from_resource $CL_8 i3wm.color8 #956f95
set_from_resource $CL_9 i3wm.color9 #A14E61
set_from_resource $CL_10 i3wm.color10 #A88D7C
set_from_resource $CL_11 i3wm.color11 #513591
set_from_resource $CL_12 i3wm.color12 #615399
set_from_resource $CL_13 i3wm.color13 #484BC2
set_from_resource $CL_14 i3wm.color14 #985E9E
set_from_resource $CL_15 i3wm.color15 #D59FD5
set_from_resource $CL_FG i3wm.color7 #f0f0f0
set_from_resource $CL_BG i3wm.color2 #000000

#class                  border   background   text     indicator   child_border
client.focused          $CL_9    $CL_11       $CL_FG    $CL_5      $CL_9
client.focused_inactive $CL_0    $CL_11       $CL_FG    $CL_5      $CL_6
client.unfocused        $CL_0    $CL_0        $CL_1     $CL_5      $CL_6
client.urgent           $CL_RED  $CL_RED      $CL_RED   $CL_RED    $CL_RED

# Bar setup
bar {
    tray_output none
    mode invisible
}
exec_always --no-startup-id /home/tom/.config/polybar/launch.sh
exec --no-startup-id compton --config /home/tom/.config/compton.conf -b

# Remove border while only one window opens
smart_borders on
new_window pixel 1
new_float pixel 1

# open matplotlib windows in floating format
for_window [class="matplotlib"] floating enable
for_window [class="Sxiv"] floating enable

#i3 gaps
for_window [class="^.*"] border pixel 1
set $gaps_inner_size 15
set $gaps_outer_size 15
gaps inner $gaps_inner_size
gaps outer $gaps_outer_size

mode "gaps-resize" {
	bindsym k gaps inner current plus 5
	bindsym j gaps inner current minus 5
	bindsym h gaps outer current minus 5
	bindsym l gaps outer current plus 5
	bindsym Return mode "default"
	bindsym Escape mode "default"
}
bindsym $mod+g mode "gaps-resize"

mode "toggle_gaps" {
	bindsym 0 mode "default", gaps inner all set $gaps_inner_size, gaps outer all set $gaps_outer_size
	bindsym 1 mode "default", gaps inner all set 1, gaps outer all set 1
	bindsym Return mode "default"
	bindsym Escape mode "default"
}
bindsym $mod+t mode "toggle_gaps"
