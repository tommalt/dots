#                                  ██ ██████
#                                  ██      ██
#                                  ██  █████
#                                  ██      ██
#                                  ██ ██████

set $mod Mod4

set $term st
set $INTERACTIVE_SHELL /bin/bash
bindsym $mod+Return exec --no-startup-id $term -e $INTERACTIVE_SHELL
bindsym $mod+apostrophe split h ;; exec --no-startup-id $term -e $INTERACTIVE_SHELL
bindsym $mod+slash split v ;; exec --no-startup-id $term -e $INTERACTIVE_SHELL

# Kill focused window
bindsym $mod+q kill


# Change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split
bindsym $mod+m split h
bindsym $mod+n split v

# Enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# Layouts
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# Toggle tiling / floating
bindsym $mod+Shift+space floating toggle
bindsym $mod+space focus mode_toggle
floating_modifier $mod

# Focus the parent container
bindsym $mod+p focus parent
bindsym $mod+z focus child

#goto previous workspace
bindsym $mod+backslash workspace back_and_forth
bindsym $mod+Shift+backslash move container to workspace back_and_forth

# Switch to workspace
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10
# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

# reload, restart, exit, lock
bindsym $mod+Shift+c reload
bindsym $mod+Shift+F1 restart
bindsym $mod+Shift+Escape exit
bindsym $mod+Shift+x exec --no-startup-id i3lock -c 000000

mode "resize" {
	bindsym h resize shrink width 5 px or 5 ppt
        bindsym k resize grow height 5 px or 5 ppt
        bindsym j resize shrink height 5 px or 5 ppt
        bindsym l resize grow width 5 px or 5 ppt
	bindsym Left resize shrink width 5 px or 5 ppt
        bindsym Down resize grow height 5 px or 5 ppt
        bindsym Up resize shrink height 5 px or 5 ppt
        bindsym Right resize grow width 5 px or 5 ppt
        bindsym Return mode "default"
        bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

#generic sound control (volume)
set $inc --no-startup-id pactl set-sink-volume 0 +5%
set $dec --no-startup-id pactl set-sink-volume 0 -5%
set $mute --no-startup-id pactl set-sink-mute 0 toggle

#cmus control
set $music --no-startup-id $term -e cmus
set $pause --no-startup-id cmus-remote -u
set $prev --no-startup-id cmus-remote -r
set $next --no-startup-id cmus-remote -n
set $begin --no-startup-id cmus-remote -k 00:00:00

bindsym XF86AudioRaiseVolume exec $inc
bindsym XF86AudioLowerVolume exec $dec
bindsym XF86AudioMute exec $mute

bindsym $mod+Shift+m exec $music
bindsym XF86AudioPlay exec $pause
bindsym XF86AudioPause exec $pause
bindsym XF86AudioPrev exec $prev
bindsym XF86AudioNext exec $next
bindsym $mod+period exec $begin

exec --no-startup-id /home/tom/scripts/menu-key.sh
exec --no-startup-id xset r rate 175 30
exec --no-startup-id setxkbmap -option ctrl:swapcaps

# dmenu, and application shortcuts
bindsym $mod+d exec --no-startup-id dmenu_run -nb Black -sb "$CL_MAGENTA" -l 10
bindsym $mod+Shift+f exec --no-startup-id /usr/bin/firefox-developer-edition

# Style #
font pango:Source Code Pro 12px

# Colors alias
set $CL_BG #002b36
set $CL_FG #ABB2BF
set $CL_CUR #ff6347
set $CL_BLACK #000000
set $CL_RED #dc322f
set $CL_GREEN #98C379
set $CL_ORANGE #ff6347
set $CL_BLUE #61AEEE
set $CL_MAGENTA #d33682
set $CL_CYAN #2aa198
set $CL_LIGHTGRAY #ABB2BF
set $CL_DARKGRAY #5C6370
set $CL_WHITE #FFFFFF

# class                 border      backgr.     text    indicator   child_border
client.focused          $CL_CUR     $CL_CUR     $CL_BG   $CL_CUR     $CL_CUR
client.focused_inactive $CL_MAGENTA $CL_MAGENTA $CL_BG   $CL_MAGENTA $CL_MAGENTA
client.unfocused        $CL_BG      $CL_BG      $CL_CUR  $CL_BG      $CL_BG
client.urgent           $CL_RED     $CL_RED     $CL_BG   $CL_RED     $CL_RED
client.placeholder      $CL_BG      $CL_BG      $CL_WHITE $CL_BLACK  $CL_BG

# Bar setup
bar {
    tray_output none
    mode invisible
}
exec_always --no-startup-id /home/tom/.config/polybar/launch.sh

# Remove border while only one window opens
smart_borders on
new_window pixel 1
new_float pixel 1

# open matplotlib windows in floating format
for_window [class="matplotlib"] floating enable

#i3 gaps
for_window [class="^.*"] border pixel 1
set $gaps_inner_size 15
set $gaps_outer_size 15
gaps inner $gaps_inner_size
gaps outer $gaps_outer_size

mode "gaps-resize" {
	bindsym k gaps inner current plus 5
	bindsym j gaps inner current minus 5
	bindsym h gaps outer current minus 5
	bindsym l gaps outer current plus 5
	bindsym Return mode "default"
	bindsym Escape mode "default"
}
bindsym $mod+g mode "gaps-resize"

mode "toggle_gaps" {
	bindsym 0 mode "default", gaps inner all set $gaps_inner_size, gaps outer all set $gaps_outer_size
	bindsym 1 mode "default", gaps inner all set 1, gaps outer all set 1
	bindsym Return mode "default"
	bindsym Escape mode "default"
}
bindsym $mod+t mode "toggle_gaps"
